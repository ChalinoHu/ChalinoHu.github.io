---
title: 16 计网基础
date: 2022-05-27 21:02:46
tags: linux环境编程
---



[toc]

# 一、网络结构模式

## C/S结构

服务器 - 客户机，即 Client - Server（C/S）结构。

### 优点

1、**分发挥客户端 PC 的处理能力**，很多工作在客户端处理完成后发送给服务器，C/S 结构客户端**响应速度快**；

2、操作界面漂亮、形式多样，可以充分满足客户自身的个性化要求；

3、 C/S 结构的管理信息系统具有**较强的事务处理能力**，能实现复杂的业务流程；

4、 **安全性较高**，C/S 一般面向相对固定的用户群，程序更加注重流程，它可以对权限进行多层次校验，提供了更安全的存取模式，对信息安全的控制能力很强，一般高度机密的信息系统采用 C/S 结构适宜。

### 缺点

1、 客户端需要安装专用的客户端软件。首先涉及到安装的工作量，其次任何一台电脑出问题，如病毒、硬件损坏，都需要进行安装或维护。系统软件升级时，每一台客户机需要重新安装，其**维护和升级成本非常高**；

2、 对客户端的操作系统一般也会有限制，**不能够跨平台**。

## B/S结构

B/S 结构（Browser/Server，浏览器/服务器模式）。WEB浏览器是客户端最主要的应用软件。这种模式统一了客户端，将**系统功能实现的核心部分集中到服**

**务器**上，简化了系统的开发、维护和使用。

### 优点

B/S 架构最大的优点是总体拥有**成本低、维护方便、 分布性强、开发简单**，可以不用安装任何专门的软件就能实现在任何地方进行操作，客户端零维护，系统的扩展非常容易，只要有一台能上网的电脑就能使用。

### 缺点

1、**通信开销大**、系统和数据的安全性较难保障; 

2、个性特点明显降低，无法实现具有个性化的功能要求；

3、协议一般是固定的：http/https

4、客户端服务器端的交互是请求-响应模式，通常**动态刷新页面**，响应速度明显降低。

# 二、MAC地址

MAC 地址（Media Access Control Address），直译为媒体存取控制位址，也称为局域网地址、以太网地址、物理地址或**硬件地址**，它是一个用来确认网络设备位置的位址，由网络设备制造商生产时烧录在网卡中。MAC地址具有**唯一性**。

# 三、IP地址

IP 地址（Internet Protocol Address）是指互联网协议地址，又译为网际协议地址。IP 地址是 IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个**逻辑地址**，以此来屏蔽物理地址的差异。

![](/images/image/IP地址分类.png)

## A类IP地址

A 类 IP 地址就由 1 字节的网络地址和 3 字节主机地址组成，网络地址的最高位必须是“0”。

A 类 IP 地址中网络的标识长度为 8 位，主机标识的长度为 24 位，A类网络地址数量较少，有 126 个网络，每个网络可以容纳主机数达 1600 多万台。

A 类 IP 地址 地址范围 1.0.0.1 - 126.255.255.254（二进制表示为：00000001 00000000 00000000 00000001 - 01111111 11111111 11111111 11111110）。最后一个是广播地址。

## B类IP地址

B 类 IP 地址就由 2 字节的网络地址和 2 字节主机地址组成，网络地址的最高位必须是“10”。

B 类 IP地址中网络的标识长度为 16 位，主机标识的长度为 16 位，B 类网络地址适用于中等规模的网络，有16384 个网络，每个网络所能容纳的计算机数为 6 万多台。

B 类 IP 地址地址范围 128.0.0.1 - 191.255.255.254 （二进制表示为：10000000 00000000 0000000000000001 - 10111111 11111111 1111111111111110）。最后一个是广播地址。

B 类 IP 地址的子网掩码为 255.255.0.0，每个网络支持的最大主机数为 256 的 2 次方 - 2 = 65534 台。

## C类IP地址

C 类 IP 地址就由 3 字节的网络地址和 1 字节主机地址组成，网络地址的最高位必须是“110”

C 类 IP 地址中网络的标识长度为 24 位，主机标识的长度为 8 位，

C 类网络地址数量较多，有 209 万余个网络。适用于小规模的局域网络，每个网络最多只能包含254台计算机。

C 类 IP 地址范围 192.0.0.1-223.255.255.254 （二进制表示为: 11000000 00000000 0000000000000001 - 11011111 11111111 11111111 11111110）。

C类IP地址的子网掩码为 255.255.255.0，每个网络支持的最大主机数为 256 - 2 = 254 台。

## D类IP地址

D 类 IP 地址在历史上被叫做多播地址（multicast address），即组播地址。在以太网中，多播地址命名了一组应该在这个网络中应用接收到一个分组的站点。多播地址的最高位必须是 “1110”，范围从224.0.0.0 - 239.255.255.255。

## 特殊IP地址

每一个字节都为 0 的地址（ “0.0.0.0” ）对应于当前主机；

IP 地址中的每一个字节都为 1 的 IP 地址（ “255.255.255.255” ）是当前子网的广播地址；

IP 地址中凡是以 “11110” 开头的 E 类 IP 地址都保留用于将来和实验使用。

IP地址中不能以十进制 “127” 作为开头，该类地址中数字 127.0.0.1 到 127.255.255.255 用于回路测试，如：127.0.0.1可以代表本机IP地址。

## 子网掩码

子网掩码只有一个作用，就是将某个 IP 地址划分成网络地址和主机地址两部分，如192.128.198.128/28，表示前28位是网络号，后4位是主机号。

# 四、端口

## 1、周知端口

范围从 0 到 1023，它们紧密绑定于一些特定的服务。

WWW 服务 使用 80端口，

FTP 服务 使用21端口，

Telnet服务 使用 23端口

## 2、注册端口

端口号从 1024 到 49151，它们松散地绑定于一些服务，分配给用户进程或应用程序，这些进程主要是用户选择安装的一些应用程序，而不是已经分配好了公认端口的常用程序。这些端口在没有被服务器资源占用的时候，可以用用户端动态选用为源端口。

## 3、动态端口 / 私有端口

动态端口的范围是从 49152 到 65535。之所以称为动态端口，是因为它一般不固定分配某种服务，而是动态分配。

# 五、网络模型

## OSI 七层参考模型

### 物理层

主要定义物理设备标准，如接口的类型以及介质的传输速率。只要通过数模/模数转换来传输比特流。单位：比特。

###  数据链路层

建立**逻辑连接**、进行**硬件地址寻址**、**差错校验**等功能。如何让格式化数据以帧为单位进行传输，以及如何让控制对物理介质的访问。将比特组合成字节进而组合成帧，用MAC地址访问介质。单位：帧

### 网络层

进行逻辑地址寻址，在位于不同地理位置的网络中的两个主机系统之间提供连接和路径选择。单位：数据包/报文分组

### 传输层

定义了一些传输数据的协议和端口号，主要是将从下层接收的数据进行分段和传输，到达目的地址后再进行重组。单位是数据报

### 会话层

通过传输层（端口号：传输端口与接收端口）建立数据传输的通路，在系统之间发起会话或者接受会话请求。

### 表示层

数据的表示、安全、压缩。主要是进行对接收的数据进行解释、加密与解密、压缩与解压缩等

### 应用层

网络服务与最终用户的一个接口。这一层为用户的应用程序（例如电子邮件、文件传输和终端仿真）提供网络服务。

## TCP/IP 四层模型

![](/images/image/TCP_IP协议簇结构.png)

###  应用层

应用层是 TCP/IP 协议的第一层，是直接为**应用进程**提供服务的。

（1）对不同种类的应用程序它们会根据自己的需要来使用应用层的不同协议，邮件传输应用使用

了 SMTP 协议、万维网应用使用了 HTTP 协议、远程登录服务应用使用了有 TELNET 协议。

（2）应用层还能加密、解密、格式化数据。

（3）应用层可以建立或解除与其他节点的联系，这样可以充分节省网络资源。

### 传输层

和OSI中传输层作用类似，主要进行数据的分段，传输和重组。

### 网络层

和OSI中传输层的作用类似，在 TCP/IP 协议中网络层可以进行网络连接的建立和终止以及 IP 地址的寻找等功能。

### 网络接口层

由于网络接口层兼并了物理层和数据链路层所以，网络接口层既是传输数据的物理媒介，也可以为网络层提供一条准确无误的线路。

# 六、协议

​	通信双方共同遵守的一组约定

## 常见协议

**应用层**

FTP协议（File Transfer Protocol 文件传输协议）

HTTP协议（Hyper TextTransfer Protocol 超文本传输协议）

NFS（Network File System 网络文件系统）

**传输层**

TCP协议（Transmission Control Protocol 传输控制协议）

UDP协议（UserDatagram Protocol 用户数据报协议）

**网络层**

IP 协议（Internet Protocol 因特网互联协议）

ICMP 协议（Internet Control Message Protocol 因特网控制报文协议）

IGMP 协议（Internet Group Management Protocol 因特网组管理协议）

**网络接口层**

ARP协议（Address Resolution Protocol 地址解析协议）

RARP协议（Reverse Address Resolution Protocol 反向地址解析协议）。

## UDP协议

![](/images/image/UDP协议.png)

## TCP协议

![](/images/image/TCP协议.png)

1. 源端口号：发送方端口号

2. 目的端口号：接收方端口号

3. 序列号：本报文段的数据的第一个字节的序号

4. 确认序号：期望收到对方下一个报文段的第一个数据字节的序号

5. 首部长度（数据偏移）：TCP 报文段的数据起始处距离 TCP 报文段的起始处有多远，即首部长度。单位：32位，即以 4 字节为计算单位

6. 保留：占 6 位，保留为今后使用，目前应置为 0

7. 紧急 URG ：此位置 1 ，表明紧急指针字段有效，它告诉系统此报文段中有紧急数据，应尽快传送

8. <u>**确认 ACK：仅当 ACK=1 时确认号字段才有效，TCP 规定，在连接建立后所有传达的报文段都必须把 ACK 置1**</u> 

9. 推送 PSH：当两个应用进程进行交互式的通信时，有时在一端的应用进程希望在键入一个命令后立即就能够收到对方的响应。在这种情况下，TCP 就可以使用推送（push）操作，这时，发送方TCP 把 PSH 置 1，并立即创建一个报文段发送出去，接收方收到 PSH = 1 的报文段，就尽快地（即“推送”向前）交付给接收应用进程，而不再等到整个缓存都填满后再向上交付

10. 复位 RST：用于复位相应的 TCP 连接

11. <u>**同步 SYN：仅在三次握手建立 TCP 连接时有效。当 SYN = 1 而 ACK = 0 时，表明这是一个连接请求报文段，对方若同意建立连接，则应在相应的报文段中使用 SYN = 1 和 ACK = 1。因此，SYN 置1 就表示这是一个连接请求或连接接受报文**</u>
12. <u>**终止 FIN：用来释放一个连接。当 FIN = 1 时，表明此报文段的发送方的数据已经发送完毕，并要求释放运输连接**</u>

13. 窗口：指发送本报文段的一方的接收窗口（而不是自己的发送窗口）

14. 校验和：校验和字段检验的范围包括首部和数据两部分，在计算校验和时需要加上 12 字节的伪头部

15. 紧急指针：仅在 URG = 1 时才有意义，它指出本报文段中的紧急数据的字节数（紧急数据结束后就是普通数据），即指出了紧急数据的末尾在报文中的位置，注意：即使窗口为零时也可发送紧急数据

16. 选项：长度可变，最长可达 40 字节，当没有使用选项时，TCP 首部长度是 20 字节

## IP协议

![](/images/image/IPV4头部结构.png)

1. 版本：IP 协议的版本。通信双方使用过的 IP 协议的版本必须一致，目前最广泛使用的 IP 协议版本号为 4（即IPv4)

2. 首部长度：单位是 32 位（4 字节）

3. 服务类型：一般不适用，取值为 0

4. 总长度：指首部加上数据的总长度，单位为字节

5. 标识（identification）：IP 软件在存储器中维持一个计数器，每产生一个数据报，计数器就加 1，并将此值赋给标识字段

6. 标志（flag）：目前只有两位有意义。标志字段中的最低位记为 MF。MF = 1 即表示后面“还有分片”的数据报。MF = 0 表示这已是若干数

据报片中的最后一个。标志字段中间的一位记为 DF，意思是“不能分片”，只有当 DF = 0 时才允许分片

7. 片偏移：指出较长的分组在分片后，某片在源分组中的相对位置，也就是说，相对于用户数据段的起点，该片从何处开始。片偏移以 8 字节为偏移单位。

8. 生存时间：TTL，表明是数据报在网络中的寿命，即为“跳数限制”，由发出数据报的源点设置这个字段。路由器在转发数据之前就把 TTL 值减一，当 TTL 值减为零时，就丢弃这个数据报。

9. 协议：指出此数据报携带的数据时使用何种协议，以便使目的主机的 IP 层知道应将数据部分上交给哪个处理过程，常用的 ICMP(1)，IGMP(2)，TCP(6)，UDP(17)，IPv6（41）

10. 首部校验和：只校验数据报的首部，不包括数据部分。

11. 源地址：发送方 IP 地址

12. 目的地址：接收方 IP 地址

## 以太网帧协议

![](/images/image/以太网帧协议.png)

## ARP协议

通过IP地址找到mac地址

![](/images/image/ARP协议.png)



