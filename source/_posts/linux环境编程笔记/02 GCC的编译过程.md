---
title: 02 GCC的编译过程
date: 2022-05-27 21:02:46
tags: linux环境编程
---





# 源代码是如何被编译成机器语言的

[TOC]

一个完整的程序在机器上运行一般需要这几步：

#### 1、预编译

`.h` `.c.`或者`.cpp`源码经**预处理器**处理后变为**以.i结尾**的预处理过后的代码文件 ，我们以源代码文件`test.c`做说明：

```
gcc -E test.cpp -o test.i
```

这一步主要进行**头文件的展开**，**宏的替换**，**删除注释**。

#### 2、编译器

.i结尾的经过预处理过后的文件会经过**编译器**翻译成**汇编代码**，该文件一般以.s结尾

```
gcc -S test.i -o test.s
```

#### 3、汇编器

经过上述步骤得到的**汇编代码**会经过**汇编器**生成对应的目标文件，该目标文件一般以`.O`结尾，此时得到的目标文件就类似可以被机器识别的**二进制机器码**。

```
gcc -c test.s -o test.o
```



#### 4、链接器

上述得到的代码只是只是单一文件翻译过来的**机器码**，此时我们的代码还将**启动代码**，**库代码**以及**其他目标代码**一起经过链接器进行链接，得到最终的类似`.exe`以及`.out`的可执行文件。

```
gcc test.o -o test
```

https://www.cnblogs.com/coderkian/p/3415016.html